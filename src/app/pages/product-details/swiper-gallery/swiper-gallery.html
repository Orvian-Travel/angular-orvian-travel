<!-- Galeria Swiper funcional -->
<div class="gallery-container">
  <!-- Swiper Principal -->
  <div *ngIf="medias && medias.length > 0">
    <swiper-container
      #mainSwiper
      class="main-swiper"
      pagination="true"
      navigation="true"
      space-between="30"
      slides-per-view="1"
      loop="true"
      autoplay="{
        'delay': 4000,
        'disableOnInteraction': false,
        'pauseOnMouseEnter': true
      }"
      (swiperslidechange)="onSlideChange($event)"
    >
      <swiper-slide *ngFor="let media of medias; let i = index">
        <div class="slide-content">
          <!-- Indicador do slide no canto superior -->
          <div class="slide-indicator">{{ i + 1 }}/{{ medias.length }}</div>

          <!-- Imagem -->
          <img
            *ngIf="isImage(media)"
            [src]="getMediaUrl(media)"
            [alt]="packageTitle + ' - Imagem ' + (i + 1)"
            class="slide-image"
            (error)="onImageError($event)"
          />

          <!-- Vídeo -->
          <video
            *ngIf="isVideo(media)"
            [src]="getMediaUrl(media)"
            class="slide-video"
            controls
            preload="metadata"
          >
            Seu navegador não suporta o elemento de vídeo.
          </video>

          <!-- Info adicional sobre o tipo da mídia -->
          <div class="media-type-badge">{{ media.type.toUpperCase() }}</div>
        </div>
      </swiper-slide>
    </swiper-container>

    <!-- Thumbnails Swiper (se houver mais de 1 mídia) -->
    <div *ngIf="medias.length > 1" class="thumbnails-container">
      <h5>Selecione uma imagem</h5>
      <swiper-container
        class="thumbnails-swiper"
        space-between="10"
        slides-per-view="4"
        slides-per-view-mobile="3"
        free-mode="true"
        watch-slides-progress="true"
      >
        <swiper-slide
          *ngFor="let media of medias; let i = index"
          class="thumbnail-slide"
        >
          <div
            class="thumbnail-item"
            [class.active]="isActiveSlide(i)"
            (click)="goToSlide(i)"
          >
            <img
              *ngIf="isImage(media)"
              [src]="getMediaUrl(media)"
              [alt]="packageTitle + ' - Miniatura ' + (i + 1)"
              class="thumbnail-image"
            />
            <div class="thumbnail-overlay">
              <span class="thumbnail-number">{{ i + 1 }}</span>
            </div>
          </div>
        </swiper-slide>
      </swiper-container>
    </div>
  </div>

  <!-- Fallback quando não há mídias -->
  <div *ngIf="!medias || medias.length === 0" class="no-media">
    <img
      [src]="getDefaultImage()"
      [alt]="packageTitle + ' - Imagem padrão'"
      class="default-image"
    />
    <p class="no-media-text">Nenhuma mídia disponível</p>
  </div>
</div>
